@page "/"
@using BodyRocky.Core.Contracts.Responses.CustomerResponses
@inject IBodyRockyApi BodyRockyClient

<PageTitle>Index</PageTitle>

<h1>Hello, world!</h1>

<div class="alert alert-warning" role="alert">
    Before authentication will function correctly, you must configure your provider details in <code>Program.cs</code>
</div>

Welcome to your new app.

@if (_allCustomers is not null)
{
    <ul>
        @foreach (var customer in _allCustomers)
        {
            <li>@customer.FirstName @customer.LastName</li>
        }
    </ul>
}

@code {

    private CustomerResponse[]? _allCustomers;

    protected override async Task OnInitializedAsync()
    {
        var response = await BodyRockyClient.GetCustomersAsync();
        _allCustomers = response.Customers.ToArray();
    }

}